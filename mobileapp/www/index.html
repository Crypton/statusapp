<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https: wss: data: gap: https://ssl.gstatic.com; style-src 'self' 'unsafe-inline'; media-src *" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link rel="stylesheet" type="text/css" href="css/stati.css" />
    <link rel="stylesheet" type="text/css" href="css/vendor/font-awesome.css" />
    <link rel="stylesheet" type="text/css" href="css/vendor/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="css/vendor/offline-theme-default.css" />
    <link rel="stylesheet" type="text/css" href="css/vendor/offline-language-english.css" />
    <link rel="stylesheet" type="text/css" href="css/vendor/offline-language-english-indicator.css" />
    <title>Kloak</title>
  </head>
  <body>
    <div class="overlay"></div>
    <div id="header">
      <span id="logout-page-title">Kloak</span>
      <ul id="header-button-bar">
	<li>
	  <a href="#" id="tasks-btn">
	    <img id="main-menu-btn" src="svg/menu.svg" />
	  </a>
	</li>
	<li class="header-bb-title">
	  <span id="page-title">Kloak</span>
	</li>
	<li class="header-btn-wrap">
	  <img id="header-btn-update" src="svg/post.svg" />
	</li>
	<li class="header-btn-wrap">
	  <img id="header-btn-refresh" src="svg/sync.svg" />
	</li>
      </ul>
      
      <div id="top-progress-wrapper">
	<div id="feed-progress-wrapper"
	     class="progress progress-striped active">
	  <div class="progress-bar"  role="progressbar" 
	       aria-valuenow="100" aria-valuemin="0" 
	       aria-valuemax="100" style="width: 100%">
	  </div>
	</div>
      </div>
    </div>

    <div id="app" class="app container-fluid">
      <div id="alerts"></div>

      <ul id="top-menu" class="menu nav nav-stacked">
	<li class="main-btn" id="my-stati">
	  <a href="#">
	    <img src="svg/post-dark.svg" />
	    <span>Update Status</span>
	  </a>
	</li>
	<li class="main-btn" id="my-feed">
	  <a href="#">
	    <img src="svg/sync-dark.svg" />
	    <span>Feed</span>
	  </a>
	</li>
	<!-- <li class="main-btn" id="refresh-feed"> -->
	<!--   <a href="#"> -->
	<!--     <i class="fa fa-refresh"></i> <span>Refresh Feed</span> -->
	<!--   </a> -->
	<!-- </li> -->
	<li class="main-btn" id="my-contacts">
	  <a href="#">
	    <img src="svg/contacts.svg" />
	    <!-- <i class="fa fa-users"></i> --> Contacts
	  </a>
	</li>
	<li class="main-btn" id="my-fingerprint">
	  <a href="#">
	    <img src="svg/contact.svg" />
	    <!-- <i class="fa fa-user"></i> --> My Contact Card
	  </a>
	</li>
	<li class="main-btn" id="my-options">
	  <a href="#">
	    <img src="svg/setting.svg" />
	    <!-- <i class="fa fa-cog"></i> --> Options
	  </a>
	</li>
	<li class="main-btn" id="about">
	  <a href="#">
	    <img src="svg/info.svg" />
	    <!-- <i class="fa fa-info-circle"></i> --> About
	  </a>
	</li>
	<!-- <li class="main-btn" id="logout"> -->
	<!--   <a href="#"> -->
	<!--     <img src="svg/logout.svg" /> -->
	<!--     <\!-- <i class="fa fa-sign-out"></i> -\-> Logout -->
	<!--   </a> -->
	<!-- </li> -->
      </ul>

      <div id="stati" class="view">
	<div id="set-my-status-form">
	  <div id="status-update-wrapper">
	    <textarea placeholder="Enlighten us, please!"
		      id="set-my-status-textarea"></textarea>
	  </div>
	  <br />
	  <div id="button-row">
	    <img id="my-avatar" src="img/avatars/franklin-4.png">
	    <img id="take-a-photo-btn" src="svg/camera.svg" />
	    <img id="pick-an-image-btn" src="svg/media.svg" />
	    <img id="include-gps-btn" src="svg/location.svg" />
	    <img id="set-my-status-btn" src="svg/send.svg" />
	  </div>
	  <div id="my-geoloc"></div>
	  <div id="my-image-to-post"></div>
	</div>
      </div>

      <div id="capture-avatar" class="view">
	<canvas id="capture-canvas" width="200" height="200" 
		style="display:none;">
	</canvas>
	<video autoplay id="capture-video" width="200" height="200"></video>
	<button class="btn" id="capture-picture">Capture</button>
      </div>
      
      <div id="feed" class="view">
	
	<div id="first-run-empty-feed-msg">
	  <p>Your feed is empty. Say something or connect with contacts to fill your feed</p>
	</div>
	
	<div id="my-feed-entries">
	</div>

	<div id="feed-footer">
	  <button class="btn btn-primary" 
		  id="fetch-previous-items">Previous...</button>
	</div>
      </div>

      <div id="find-users-view" class="view">
	<div id="find-user-form" class="input-group input-group-lg">
	  <input id="find-someone" 
		 type="text"
		 size="12"
		 maxlength="32"
		 type="text" class="form-control">
	  <span class="input-group-btn btn-group-lg">
	    <button id="find-someone-btn" 
		    class="btn btn-default" 
		    type="button">Find User</button>
	  </span>
	</div>

      </div>

      <div id="generate-account" class="view">
	<form id="generate-form" class="input-group input-group-lg">
	  <input placeholder="Username"
		 autocapitalize="off"
		 size="12"
		 maxlength="32"
		 class="form-control login-input" 
		 id="username-generate" type="text" />
	  <p id="generate-account-verbage">A long passphrase might have been generated randomly for you, <i class="ired">in red below</i> (unless you typed one into the login form). It is highly suggested you use a long passphrase and save it into a password manager application.</p>
	  <p id="get-new-passphrase-wrapper">
	    <button id="get-new-passphrase" class="btn btn-primary">
	      Generate Long Passphrase
	    </button>
	  </p>
	  <input placeholder="Passphrase" 
		 size="12"
		 maxlength="32"
		 class="form-control login-input"
		 id="password-generate" type="text" 
		 autocomplete="off" />
	  <div id="generate-buttons">
	    <button class="btn btn-primary" 
		    id="register-generate-btn">Create Account</button>
	    <br />
	    <button class="btn btn-primary" 
		    id="register-generate-cancel-btn">Cancel</button>
	  </div>
	</form>
      </div>
      
      <div id="account-login" class="view active">
	<form id="login-form" class="input-group input-group-lg">
	  <input placeholder="Username"
		 autocapitalize="off"
		 size="12"
		 maxlength="32"
		 class="form-control login-input" 
		 id="username-login" type="text" />
	  <input placeholder="Passphrase" 
		 size="12"
		 maxlength="32"
		 class="form-control login-input"
		 id="password-login" type="password" 
		 autocomplete="off" />
	  <div id="remember-credentials-wrapper">
	    <input type="checkbox" id="remember-credentials" checked />
	    <label id="rememeber-credentials-label"
		   for="remember-credentials">Remember credentials</label>
	  </div>
	</form>

	<div id="login-buttons">
	  <h3 id="username-placeholder"></h3>
	  <button class="btn btn-success"
		  id="login-btn">Login</button>
	</div>
	<hr />
	<div id="register-btn-wrapper">
	  <button class="btn btn-primary"
		  id="switch-user-btn">Switch User</button>
	  <button class="btn btn-primary"
		  id="register-btn">Create Account</button>
	</div>
      </div>

      <div id="login-progress" class="view">
	<div id="login-status">
	  <span class="status"></span>
	</div>
	<!-- <div id="progress-wrapper" -->
	<!--      class="progress progress-striped active"> -->
	<!--   <div class="progress-bar"  role="progressbar"  -->
	<!--        aria-valuenow="100" aria-valuemin="0"  -->
	<!--        aria-valuemax="100" style="width: 100%"> -->
	<!--   </div> -->
	<!-- </div> -->
      </div>

      <div id="scan-select" class="view">
	<p>
	  To add a contact, you must first have them send you
	  their Contact Card. Depending on the method it is sent,
	  you may either scan the QR Code or load the Contact Card image from
	  your image library.
	</p>
	<div id="scan-select-buttons">
	  <button type="button" 
		  class="btn btn-success"
		  id="scan">Scan QR</button>
	  <button type="button" 
		  class="btn btn-primary"
		  id="get-image">Load File</button>
	</div>
	<ul id="contact-add-log">
	  
	</ul>
      </div>

      <div id="scan-select-desktop" class="view">
	<p>
	  To add a contact, you must first have them send you
	  their ID card. Once you receive the image, select it here to import the contact's account data.
	</p>
	<p>
	  After you select the image, you will be asked to verify
	  the integrity of their ID against one
	  supplied by the server.
	</p>
	<div id="scan-select-buttons">
	  <button type="button" 
		  class="btn btn-primary"
		  id="get-image-desktop">Load file</button>
	  <input style="display:none;" id="id-file-dialog" type="file" 
		 accept=".png,image/png" />
	</div>
      </div>

      <div id="contacts" class="view">
	<div id="contacts-list-wrapper">
	  <ul id="contacts-list" class="nav nav-pills nav-stacked">
	  </ul>
	</div>
	<img id="add-contact-button" src="svg/add.svg" />
      </div>

      <div id="contact-details" class="view">

	<div id="contact-message">
	</div>
	
	<div id="contact-details-buttons" class="btn-group btn-group-lg">
	  <button type="button"
		  class="btn btn-success"
		  id="contacts-detail-dismiss-btn">Done</button>
	  <button type="button"
		  class="btn btn-danger"
		  id="contact-delete-btn">Delete Contact</button>
	</div>
	<div id="confirm-delete-contact-wrapper" class="btn-group btn-group-lg">
	  <p>Are you sure you want to delete this contact and unshare your feed?</p>
	  <button type="button"
		  class="btn btn-success"
		  id="contacts-detail-cancel-delete-btn">Cancel</button>
	  <button type="button"
		  class="btn btn-danger"
		  id="contact-yes-delete-btn">Confirm Delete</button>
	</div>
      </div>

      <div id="my-options-pane" class="view">
	<div id="options-controls">
	  <p class="option option-text">
	    By default (on supported devices), your credentials are securely remembered to allow for fast login
	  </p>
	  <p class="option">
	    <button type="button"
		    id="forget-credentials"
		    class="btn btn-success">Forget credentials</button>
	  </p>
	  <p class="option option-text">
	    Display My Passphrase
	  </p>
	  <p class="option">
	  <button type="button"
		  id="display-passphrase"
		  class="btn btn-success">Display passphrase</button>
	  </p>
	  <p class="option option-text">
	    Change my passphrase
	  </p>
	  <p class="option">
	  <button disabled type="button"
		  id="change-passphrase"
		  class="btn btn-success">Change passphrase</button>
	  </p>
	  <!-- <p class="option option-text"> -->
	  <!--   Delete Account & All Data Created -->
	  <!-- </p> -->
	  <!-- <p class="option"> -->
	  <!-- <button disabled type="button" -->
	  <!-- 	  id="delete-account" -->
	  <!-- 	  class="btn btn-primary">Delete account</button> -->
	  <!-- </p> -->
	  <!--  <p class="option option-text"> -->
	  <!--   Self-destruct Account on: -->
	  <!-- </p> -->
	  <!-- <p class="option"> -->
	  <!--   [Need Date & Timepicker widget] -->
	  <!-- </p> -->
	</div>
      </div>
      
      <div id="my-fingerprint-id" class="view">
      </div>

      <div id="peer-fingerprint-id" class="view">
      </div>

      <div id="app-about" class="view">
      </div>
      
      <div id="first-run" class="view">
	<h3>Initial Setup</h3>
	<p><strong>Congratulations! You've signed up for Kloak.</strong></p>
	<p>
	  Now that you have an account, you need to create an <strong>ID Card</strong>, which identifies you to other users you would like to communicate with.
	</p>
	<p>
	  Once you share this <strong>Contact Card</strong> with another user, and you have received theirs, you can privately communicate.
	</p>
	<br />
	<p class="text-center">
	  <button class="btn btn-success" 
		  id="create-id-card">Create Contact Card</button>
	</p>
      </div>

      <div id="verify-user" class="view">
	<div id="verify-user-success">
	  <p><strong>Successfully captured fingerprint</strong></p>
	  <p>
	    The following images are generated from the key fingerprint data from
	    the server and the scan, respectively. Ensure the following images are identical.
	  </p>
	  <div id="verify-user-success-msg"></div>
	  <p>
	    The computer thinks these <strong>match</strong>.
	  </p>
	  <p>
	    If they do, tap <strong>Trust</strong> below.
	  </p>
	  <p>
	    If not, take a screenshot of this, press <strong>Cancel</strong>,
	    and speak with the person who sent you this Contact card.
	  </p>
	  <div id="verify-user-buttons">
	    <button id="verify-trust-save" 
		    class="btn btn-success">Trust</button>
	    <button id="verify-trust-cancel" 
		    class="btn btn-danger">Cancel</button>
	  </div>
	</div>

	<div id="verify-user-failure">
	  <p><strong>Failed to capture fingerprint</strong></p>
	  <div id="verify-user-failure-msg"></div>
	  <div>
	    <button id="verify-trust-failure-ok" 
		    class="btn btn-default">OK</button>
	  </div>
	</div>
      </div>

      <div id="images" class="view">
	<img id="picture"/>
      </div>

    </div>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/crypton.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="js/stati.js"></script>
    <script type="text/javascript" src="js/configuration.js"></script>
    <script type="text/javascript" src="js/day-of-year.js"></script>
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/vendor/humane.js"></script>
    <script type="text/javascript" src="js/vendor/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/vendor/canvas-toBlob.js"></script>
    <script type="text/javascript" src="js/vendor/FileSaver.js"></script>
    <script async type="text/javascript" src="js/passphrase-corpus.js"></script>
    <!-- BEGIN QR Code Reader --> 
    <script type="text/javascript" src="js/vendor/jsqrcode/grid.js"></script>
    <script type="text/javascript" src="js/vendor/jsqrcode/version.js"></script>
    <script type="text/javascript" src="js/vendor/jsqrcode/detector.js"></script>
    <script type="text/javascript" src="js/vendor/jsqrcode/formatinf.js"></script>
    <script type="text/javascript" src="js/vendor/jsqrcode/errorlevel.js"></script>
    <script type="text/javascript" src="js/vendor/jsqrcode/bitmat.js"></script>
    <script type="text/javascript" src="js/vendor/jsqrcode/datablock.js"></script>
    <script type="text/javascript" src="js/vendor/jsqrcode/bmparser.js"></script>
    <script type="text/javascript" src="js/vendor/jsqrcode/datamask.js"></script>
    <script type="text/javascript" src="js/vendor/jsqrcode/rsdecoder.js"></script>
    <script type="text/javascript" src="js/vendor/jsqrcode/gf256poly.js"></script>
    <script type="text/javascript" src="js/vendor/jsqrcode/gf256.js"></script>
    <script type="text/javascript" src="js/vendor/jsqrcode/decoder.js"></script>
    <script type="text/javascript" src="js/vendor/jsqrcode/qrcode.js"></script>
    <script type="text/javascript" src="js/vendor/jsqrcode/findpat.js"></script>
    <script type="text/javascript" src="js/vendor/jsqrcode/alignpat.js"></script>
    <script type="text/javascript" src="js/vendor/jsqrcode/databr.js"></script>
    <!-- END QR Code Reader -->
    <script type="text/javascript" src="js/vendor/Autolinker.js"></script>
    <script type="text/javascript" src="js/vendor/offline.min.js"></script>
    <script async type="text/javascript" src="js/geo-places.js"></script>
    <script async type="text/javascript" src="js/vendor/smartcrop.js"></script>
  </body>
</html>
